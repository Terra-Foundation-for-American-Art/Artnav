(function(e){function t(t){for(var i,l,s=t[0],r=t[1],a=t[2],d=0,m=[];d<s.length;d++)l=s[d],Object.prototype.hasOwnProperty.call(n,l)&&n[l]&&m.push(n[l][0]),n[l]=0;for(i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i]);u&&u(t);while(m.length)m.shift()();return c.push.apply(c,a||[]),o()}function o(){for(var e,t=0;t<c.length;t++){for(var o=c[t],i=!0,s=1;s<o.length;s++){var r=o[s];0!==n[r]&&(i=!1)}i&&(c.splice(t--,1),e=l(l.s=o[0]))}return e}var i={},n={createnew:0},c=[];function l(t){if(i[t])return i[t].exports;var o=i[t]={i:t,l:!1,exports:{}};return e[t].call(o.exports,o,o.exports,l),o.l=!0,o.exports}l.m=e,l.c=i,l.d=function(e,t,o){l.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},l.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},l.t=function(e,t){if(1&t&&(e=l(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(l.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)l.d(o,i,function(t){return e[t]}.bind(null,i));return o},l.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return l.d(t,"a",t),t},l.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},l.p="";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],r=s.push.bind(s);s.push=t,s=s.slice();for(var a=0;a<s.length;a++)t(s[a]);var u=r;c.push([2,"chunk-vendors"]),o()})({2:function(e,t,o){e.exports=o("bd48")},"486e":function(e,t,o){"use strict";o.d(t,"a",(function(){return i}));o("ac1f"),o("5319"),o("a9e3"),o("9129");var i=function(e,t,o){o.valid[e]=!(!t||"default"===t||""===t)}},"4eb9":function(e,t,o){"use strict";o("635e")},"635e":function(e,t,o){},"7fd0":function(e,t,o){"use strict";o("f1ae")},9191:function(e,t,o){"use strict";o.d(t,"b",(function(){return l})),o.d(t,"a",(function(){return s}));var i=o("bc3a"),n=o.n(i),c="http://127.0.0.1:8000/";c="https://artnav.terraamericanart.org/";var l=n.a.create({baseURL:"".concat(c,"api/")}),s="https://conversations.terraamericanart.org/api/v1/artworks/"},a421:function(e,t,o){"use strict";var i=o("7a23"),n={class:"mini-loader_wrap"};function c(e,t,o,c,l,s){return Object(i["openBlock"])(),Object(i["createElementBlock"])("div",n,[Object(i["createElementVNode"])("div",{class:Object(i["normalizeClass"])(["sp-3balls",o.colorClass]),style:Object(i["normalizeStyle"])(o.additionalStyles)},null,6)])}var l={props:["colorClass","additionalStyles"]},s=(o("4eb9"),o("6b0d")),r=o.n(s);const a=r()(l,[["render",c]]);t["a"]=a},bd48:function(e,t,o){"use strict";o.r(t);o("e260"),o("e6cf"),o("cca6"),o("a79d");var i=o("e8d1"),n=(o("5377"),o("7a23")),c={class:"modal-dialog",role:"document"},l={class:"modal-content new_artwork"},s={class:"form-group"},r=Object(n["createElementVNode"])("label",{for:"art_title"},"Artwork Title",-1),a=Object(n["createElementVNode"])("small",{id:"imageHelp",class:"form-text text-muted"},"Required",-1),u={class:"form-group"},d=Object(n["createElementVNode"])("label",{for:"art_title"},"Date of Creation",-1),m=Object(n["createElementVNode"])("small",{id:"imageHelp",class:"form-text text-muted"},"Required",-1),f={class:"form-group artist-form-field"},b=Object(n["createElementVNode"])("label",{for:"art_artist"},"Artist Name",-1),_=Object(n["createElementVNode"])("small",{id:"imageHelp",class:"form-text text-muted"},"Required",-1),p={class:"auto-complete-input"},h={key:0,class:"new-obj-indicator"},w={key:1,class:"auto-complete-list"},O=["onClick"],v={class:"form-group collection-form-field"},j=Object(n["createElementVNode"])("label",{for:"art_collection"},"Assign to Collection",-1),k=Object(n["createElementVNode"])("small",{id:"imageHelp",class:"form-text text-muted"},"Optional",-1),g={class:"auto-complete-input"},S={key:0,class:"new-obj-indicator"},N={key:1,class:"auto-complete-list"},C=["onClick"],E={class:"form-group"},V=Object(n["createElementVNode"])("label",{for:"catalog_id"},"Accession Number",-1),y={class:"form-group"},T=Object(n["createElementVNode"])("label",{for:"catalog_id"},"IIIF Image ID",-1),A=Object(n["createElementVNode"])("small",{id:"imageHelp",class:"form-text text-muted"},"Required",-1),x={class:"modal-foot"},I={class:"form-group"},D=["disabled"],B=["disabled"],F={class:"loading-view"},U={class:"loading-view-wrap"},L={class:"loader-wrap"},M=Object(n["createElementVNode"])("h1",null,"Uploading Artwork",-1),P=Object(n["createElementVNode"])("p",null,"Larger file sizes can take up to 5 minutes.",-1),R={class:"progress-elements"},X={class:"loading_percent"},q={class:"material-icons"},z=["width","height"],H=["stroke-width","stroke-dasharray","cx","cy","r"],K=["stroke-width","stroke-dasharray","stroke-dashoffset","cx","cy","r"];function G(e,t,o,i,G,J){var Z=Object(n["resolveComponent"])("MiniLoader");return Object(n["openBlock"])(),Object(n["createElementBlock"])("div",c,[Object(n["createElementVNode"])("div",l,[Object(n["createElementVNode"])("div",{class:Object(n["normalizeClass"])(["modal-body",{loading:J.isSaving||J.isSuccess}])},[Object(n["createElementVNode"])("div",s,[r,a,Object(n["withDirectives"])(Object(n["createElementVNode"])("input",{class:"form-control",type:"text",id:"art_title",placeholder:"Title...","onUpdate:modelValue":t[0]||(t[0]=function(e){return G.submission.artwork_title=e})},null,512),[[n["vModelText"],G.submission.artwork_title]])]),Object(n["createElementVNode"])("div",u,[d,m,Object(n["withDirectives"])(Object(n["createElementVNode"])("input",{class:"form-control",type:"text",id:"art_date",placeholder:"Date...","onUpdate:modelValue":t[1]||(t[1]=function(e){return G.submission.artwork_creation_date=e})},null,512),[[n["vModelText"],G.submission.artwork_creation_date]])]),Object(n["createElementVNode"])("div",f,[b,_,Object(n["createElementVNode"])("div",p,[Object(n["withDirectives"])(Object(n["createElementVNode"])("input",{type:"text",class:"form-control",placeholder:"Search for an existing artist or add a new one",onKeydown:t[2]||(t[2]=function(e){return G.flags.autocomplete_selections.artist=!1}),onClick:t[3]||(t[3]=function(e){return G.flags.autocomplete_selections.artist=!1}),"onUpdate:modelValue":t[4]||(t[4]=function(e){return G.local_input.artist_name=e})},null,544),[[n["vModelText"],G.local_input.artist_name]]),G.new_artist.artist_name?(Object(n["openBlock"])(),Object(n["createElementBlock"])("span",h,"New Artist")):Object(n["createCommentVNode"])("",!0),G.autocompletes.artists?(Object(n["openBlock"])(),Object(n["createElementBlock"])("ul",w,[(Object(n["openBlock"])(!0),Object(n["createElementBlock"])(n["Fragment"],null,Object(n["renderList"])(G.autocompletes.artists,(function(e,t){return Object(n["openBlock"])(),Object(n["createElementBlock"])("li",{key:"found-artist-".concat(t),onClick:function(t){return J.autoCompleteSelectArtist("artist",e,"artist_name")}},Object(n["toDisplayString"])(e.artist_name),9,O)})),128))])):Object(n["createCommentVNode"])("",!0)])]),Object(n["createElementVNode"])("div",v,[j,k,Object(n["createElementVNode"])("div",g,[Object(n["withDirectives"])(Object(n["createElementVNode"])("input",{type:"text",class:"form-control",placeholder:"Search for an existing collection or add a new one",onKeydown:t[5]||(t[5]=function(){return J.handleCollectionInputKeyDown&&J.handleCollectionInputKeyDown.apply(J,arguments)}),onClick:t[6]||(t[6]=function(e){return G.flags.autocomplete_selections.collection=!1}),"onUpdate:modelValue":t[7]||(t[7]=function(e){return G.local_input.collection_title=e})},null,544),[[n["vModelText"],G.local_input.collection_title]]),G.new_collection.collection_title?(Object(n["openBlock"])(),Object(n["createElementBlock"])("span",S,"New Collection")):Object(n["createCommentVNode"])("",!0),G.autocompletes.collections?(Object(n["openBlock"])(),Object(n["createElementBlock"])("ul",N,[(Object(n["openBlock"])(!0),Object(n["createElementBlock"])(n["Fragment"],null,Object(n["renderList"])(G.autocompletes.collections,(function(e,t){return Object(n["openBlock"])(),Object(n["createElementBlock"])("li",{key:"found-collection-".concat(t),onClick:function(t){return J.autoCompleteSelectCollection(e,"collection_title")}},Object(n["toDisplayString"])(e.collection_title),9,C)})),128))])):Object(n["createCommentVNode"])("",!0)])]),Object(n["createElementVNode"])("div",E,[V,Object(n["withDirectives"])(Object(n["createElementVNode"])("input",{class:"form-control",type:"text",id:"accession_number",placeholder:"Accession Number...","onUpdate:modelValue":t[8]||(t[8]=function(e){return G.submission.accession_number=e})},null,512),[[n["vModelText"],G.submission.accession_number]])]),Object(n["createElementVNode"])("div",y,[T,A,Object(n["withDirectives"])(Object(n["createElementVNode"])("input",{class:"form-control",type:"text",id:"iiif_id",placeholder:"IIIF ID...","onUpdate:modelValue":t[9]||(t[9]=function(e){return G.submission.iiif_uuid=e})},null,512),[[n["vModelText"],G.submission.iiif_uuid]])])],2),Object(n["createElementVNode"])("div",x,[Object(n["createElementVNode"])("div",I,[Object(n["createElementVNode"])("button",{class:"btn artmap-secondary","data-toggle":"modal","data-target":"#newArtmap",disabled:J.isSaving}," Cancel ",8,D),Object(n["createElementVNode"])("button",{class:"btn artmap-primary",onClick:t[10]||(t[10]=function(){return J.save&&J.save.apply(J,arguments)}),disabled:!G.validForm},[Object(n["withDirectives"])(Object(n["createElementVNode"])("span",null,"Create",512),[[n["vShow"],J.isInitial]]),Object(n["withDirectives"])(Object(n["createElementVNode"])("span",null,[Object(n["createVNode"])(Z)],512),[[n["vShow"],J.isSaving||J.isSuccess]])],8,B)])])]),Object(n["withDirectives"])(Object(n["createElementVNode"])("div",F,[Object(n["createElementVNode"])("div",U,[Object(n["createElementVNode"])("div",L,[M,P,Object(n["createElementVNode"])("div",R,[Object(n["createElementVNode"])("span",X,[Object(n["withDirectives"])(Object(n["createElementVNode"])("i",q,"î",512),[[n["vShow"],J.isSuccess]]),Object(n["withDirectives"])(Object(n["createElementVNode"])("span",null,Object(n["toDisplayString"])(G.loaded_percent)+"%",513),[[n["vShow"],!J.isSuccess]])]),(Object(n["openBlock"])(),Object(n["createElementBlock"])("svg",{width:2*G.circle_loader.radius+2*G.circle_loader.stroke_width,height:2*G.circle_loader.radius+2*G.circle_loader.stroke_width},[Object(n["createElementVNode"])("circle",{id:"loading-track","stroke-width":G.circle_loader.stroke_width,"stroke-dasharray":J.circumference,"stroke-dashoffset":0,cx:G.circle_loader.radius+G.circle_loader.stroke_width,cy:G.circle_loader.radius+G.circle_loader.stroke_width,r:G.circle_loader.radius,transform:"",class:"outer"},null,8,H),Object(n["createElementVNode"])("circle",{"stroke-width":G.circle_loader.stroke_width,"stroke-dasharray":J.circumference,"stroke-dashoffset":J.circularLoadedPercent,cx:G.circle_loader.radius+G.circle_loader.stroke_width,cy:G.circle_loader.radius+G.circle_loader.stroke_width,r:G.circle_loader.radius,transform:"",class:"outer"},null,8,K)],8,z))]),Object(n["createElementVNode"])("p",{class:Object(n["normalizeClass"])(["redirect-notice",{show_notice:J.isSuccess}])},"Redirecting...",2)])])],512),[[n["vShow"],J.isSaving||J.isSuccess]])])}o("ac1f"),o("5319"),o("4de4"),o("d3b7"),o("b64b"),o("a9e3");var J=o("9191"),Z=o("a421"),Q=o("486e"),W=o("2ef0"),Y=o.n(W),$={data:function(){return{csrf:window.csrf,userId:window.user_id,options:{artists:null,collections:null},autocompletes:{artists:null,collections:null},flags:{autocomplete_selections:{artist:!1,collection:!1}},loaded_percent:0,create_step:1,circle_loader:{radius:50,dash_offset:0,stroke_width:2},form_data:new FormData,local_input:{artist_name:null,collection_title:null},new_artist:{artist_name:null},new_collection:{collection_title:null,artworks:[]},selected_collection:null,submission:{artwork_title:null,artwork_creation_date:null,artwork_slug:null,artist:null,curator:window.user_id,curator_id:window.user_id,accession_number:null,iiif_uuid:null},currentStatus:0,s:{STATUS_INITIAL:0,STATUS_SAVING:1,STATUS_SUCCESS:2,STATUS_FAILED:3},valid:{artwork_title:!1,artwork_creation_date:!1,artist_name:!1,accession_number:!1,iiif_uuid:!1},validForm:!1}},computed:{isInitial:function(){return this.currentStatus===this.s.STATUS_INITIAL},isSaving:function(){return this.currentStatus===this.s.STATUS_SAVING},isSuccess:function(){return this.currentStatus===this.s.STATUS_SUCCESS},isFailed:function(){return this.currentStatus===this.s.STATUS_FAILED},circumference:function(){return 2*Math.PI*this.circle_loader.radius},circularLoadedPercent:function(){var e=this.loaded_percent,t=Math.PI*(2*this.circle_loader.radius);e<0&&(e=0),e>100&&(e=100);var o=(100-e)/100*t;return o}},watch:{"submission.artwork_title":function(e){var t=e.replace(/[^A-Z0-9]+/gi,"-").toLowerCase().toLowerCase();this.submission.artwork_slug=t,Object(Q["a"])("artwork_title",e,this),this.submissionCheck()},"submission.artwork_creation_date":function(e){Object(Q["a"])("artwork_creation_date",e,this),this.submissionCheck()},"submission.accession_number":function(e){Object(Q["a"])("accession_number",e,this),this.submissionCheck()},"submission.iiif_uuid":function(e){Object(Q["a"])("iiif_uuid",e,this),this.submissionCheck()},"local_input.artist_name":function(e){var t;this.flags.autocomplete_selections.artist?(this.autocompletes.artists=null,this.new_artist.artist_name=null):e?(t=Y.a.filter(this.options.artists,(function(t){return t.artist_name.toLowerCase().indexOf(e.toLowerCase())>-1})),t.length>0?this.autocompletes.artists=t:(this.autocompletes.artists=null,this.new_artist.artist_name=e)):(this.autocompletes.artists=null,this.new_artist.artist_name=null),Object(Q["a"])("artist_name",e,this),this.submissionCheck()},"local_input.collection_title":function(e){var t;this.flags.autocomplete_selections.collection?(this.autocompletes.collections=null,this.new_collection.collection_title=null):e?(t=Y.a.filter(this.options.collections,(function(t){return t.collection_title.toLowerCase().indexOf(e.toLowerCase())>-1})),t.length>0?this.autocompletes.collections=t:(this.autocompletes.collections=null,this.new_collection.collection_title=e)):(this.autocompletes.collections=null,this.new_collection.collection_title=null)}},methods:{submissionCheck:function(){var e=0,t=Object.keys(this.valid).length;for(var o in this.valid)this.valid[o]&&e++;this.validForm=e===t},handleCollectionInputKeyDown:function(){this.flags.autocomplete_selections.collection=!1,this.selected_collection=null},autoCompleteSelectArtist:function(e,t,o){this.flags.autocomplete_selections.artist=!0,this.submission[e]=t.id,this.local_input[o]=t[o]},autoCompleteSelectCollection:function(e,t){this.flags.autocomplete_selections.collection=!0,this.selected_collection=e.id,this.local_input[t]=e[t]},saveNewArtistFirst:function(e){J["b"].post("artists/",this.new_artist,{headers:{"X-CSRFToken":window.csrf}}).then((function(t){e(t)}),(function(e){console.log(e)}))},saveNewCollectionFirst:function(e){this.new_collection["curator"]=Number(window.user_id),this.new_collection["curator_id"]=Number(window.user_id),this.new_collection["collection_slug"]=this.new_collection.collection_title.replace(/[^A-Z0-9]+/gi,"-").toLowerCase().toLowerCase(),J["b"].post("artcollections/",this.new_collection,{headers:{"X-CSRFToken":window.csrf}}).then((function(t){e(t)}),(function(e){console.log(e)}))},save:function(){this.currentStatus=this.s.STATUS_SAVING;var e=this;this.new_artist.artist_name||this.new_collection.collection_title?this.new_artist.artist_name&&this.new_collection.collection_title?this.saveNewArtistFirst((function(t){e.submission.artist=t.data.id,e.saveNewCollectionFirst((function(t){e.saveSubmission(!0,t.data.id)}))})):this.new_artist.artist_name?this.saveNewArtistFirst((function(t){e.submission.artist=t.data.id,e.saveSubmission()})):this.new_collection.collection_title&&this.saveNewCollectionFirst((function(t){e.saveSubmission(!0,t.data.id)})):this.saveSubmission()},addArtToCollection:function(e,t,o){var i,n=this,c=this;J["b"].get("artcollections/".concat(e,"/"),{headers:{"X-CSRFToken":window.csrf}}).then((function(l){i=l.data,i.artworks.push(t),J["b"].put("artcollections/".concat(e,"/"),i,{headers:{"X-CSRFToken":window.csrf}}).then((function(e){c.currentStatus=n.s.STATUS_SUCCESS,setTimeout((function(){window.location="/art/".concat(o,"/")}),500)}),(function(e){console.log(e)}))}),(function(e){console.log(e)}))},saveSubmission:function(e,t){var o=this,i=this;J["b"].post("art/",this.submission,{headers:{"X-CSRFToken":window.csrf}}).then((function(n){e?o.addArtToCollection(t,n.data.id,n.data.artwork_slug):o.selected_collection?o.addArtToCollection(i.selected_collection,n.data.id,n.data.artwork_slug):(o.currentStatus=i.s.STATUS_SUCCESS,setTimeout((function(){window.location="/art/".concat(n.data.artwork_slug,"/")}),500))}),(function(e){console.log(e)}))},getArtists:function(){var e=this;J["b"].get("artists/").then((function(t){e.options.artists=t.data}),(function(e){console.log(e)}))},getCollections:function(){var e=this;J["b"].get("artcollections/").then((function(t){e.options.collections=t.data}),(function(e){console.log(e)}))},saveNewArtmap:function(){J["b"].post("art",this.submission,{headers:{"X-CSRFToken":window.csrf}}).then((function(e){window.location="/art/".concat(e.data.artwork_slug,"/")}),(function(e){console.log(e)}))}},mounted:function(){var e=this;this.getArtists(),this.getCollections(),setTimeout((function(){e.submission.curator=window.user_id,e.submission.curator_id=window.user_id}),0)},components:{MiniLoader:Z["a"]}},ee=(o("7fd0"),o("6b0d")),te=o.n(ee);const oe=te()($,[["render",G]]);var ie=oe;Object(i["a"])(ie,null,null,"#createnew")},e8d1:function(e,t,o){"use strict";o.d(t,"a",(function(){return s}));var i=o("5530"),n=o("7a23"),c=o("1344"),l=o("6676"),s=function(e,t,o,s){var r=Object(c["a"])(),a=document.querySelector(s),u=Object(n["createApp"])(e,Object(i["a"])({},a.dataset));return u.config.globalProperties.emitter=r,t&&u.use(t),o&&u.use(o),u.use(l["a"],{autoSetContainer:!0,appendToBody:!0}),u.mount(s),u}},f1ae:function(e,t,o){}});