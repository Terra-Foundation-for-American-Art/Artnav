(function(e){function t(t){for(var n,l,r=t[0],s=t[1],a=t[2],d=0,m=[];d<r.length;d++)l=r[d],Object.prototype.hasOwnProperty.call(i,l)&&i[l]&&m.push(i[l][0]),i[l]=0;for(n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n]);u&&u(t);while(m.length)m.shift()();return c.push.apply(c,a||[]),o()}function o(){for(var e,t=0;t<c.length;t++){for(var o=c[t],n=!0,r=1;r<o.length;r++){var s=o[r];0!==i[s]&&(n=!1)}n&&(c.splice(t--,1),e=l(l.s=o[0]))}return e}var n={},i={createnew:0},c=[];function l(t){if(n[t])return n[t].exports;var o=n[t]={i:t,l:!1,exports:{}};return e[t].call(o.exports,o,o.exports,l),o.l=!0,o.exports}l.m=e,l.c=n,l.d=function(e,t,o){l.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},l.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},l.t=function(e,t){if(1&t&&(e=l(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(l.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)l.d(o,n,function(t){return e[t]}.bind(null,n));return o},l.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return l.d(t,"a",t),t},l.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},l.p="";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],s=r.push.bind(r);r.push=t,r=r.slice();for(var a=0;a<r.length;a++)t(r[a]);var u=s;c.push([2,"chunk-vendors"]),o()})({2:function(e,t,o){e.exports=o("bd48")},"258e":function(e,t,o){"use strict";o("a79f")},"486e":function(e,t,o){"use strict";o.d(t,"a",(function(){return n}));o("ac1f"),o("5319"),o("a9e3"),o("9129");var n=function(e,t,o){o.valid[e]=!(!t||"default"===t||""===t)}},"4eb9":function(e,t,o){"use strict";o("635e")},"635e":function(e,t,o){},9191:function(e,t,o){"use strict";o.d(t,"b",(function(){return l})),o.d(t,"a",(function(){return r}));var n=o("bc3a"),i=o.n(n),c="http://127.0.0.1:8000/";c="https://artnav.terraamericanart.org/";var l=i.a.create({baseURL:"".concat(c,"api/")}),r="https://conversations.terraamericanart.org/api/v1/artworks/"},a421:function(e,t,o){"use strict";var n=o("7a23"),i={class:"mini-loader_wrap"};function c(e,t,o,c,l,r){return Object(n["openBlock"])(),Object(n["createElementBlock"])("div",i,[Object(n["createElementVNode"])("div",{class:Object(n["normalizeClass"])(["sp-3balls",o.colorClass]),style:Object(n["normalizeStyle"])(o.additionalStyles)},null,6)])}var l={props:["colorClass","additionalStyles"]},r=(o("4eb9"),o("6b0d")),s=o.n(r);const a=s()(l,[["render",c]]);t["a"]=a},a79f:function(e,t,o){},bd48:function(e,t,o){"use strict";o.r(t);o("e260"),o("e6cf"),o("cca6"),o("a79d");var n=o("e8d1"),i=(o("5377"),o("7a23")),c={class:"modal-dialog",role:"document"},l={class:"modal-content new_artwork"},r={class:"form-group"},s=Object(i["createElementVNode"])("label",{for:"art_title"},"Artwork Title",-1),a=Object(i["createElementVNode"])("small",{id:"imageHelp",class:"form-text text-muted"},"Required",-1),u={class:"form-group"},d=Object(i["createElementVNode"])("label",{for:"art_title"},"Date of Creation",-1),m=Object(i["createElementVNode"])("small",{id:"imageHelp",class:"form-text text-muted"},"Required",-1),f={class:"form-group artist-form-field"},b=Object(i["createElementVNode"])("label",{for:"art_artist"},"Artist Name",-1),_=Object(i["createElementVNode"])("small",{id:"imageHelp",class:"form-text text-muted"},"Required",-1),p={class:"auto-complete-input"},h={key:0,class:"new-obj-indicator"},w={key:1,class:"auto-complete-list"},v=["onClick"],O={class:"form-group collection-form-field"},j=Object(i["createElementVNode"])("label",{for:"art_collection"},"Assign to Collection",-1),k=Object(i["createElementVNode"])("small",{id:"imageHelp",class:"form-text text-muted"},"Optional",-1),g={class:"auto-complete-input"},S={key:0,class:"new-obj-indicator"},C={key:1,class:"auto-complete-list"},N=["onClick"],E={class:"form-group"},y=Object(i["createElementVNode"])("label",{for:"catalog_id"},"Accession Number",-1),V={class:"modal-foot"},T={class:"form-group"},A=["disabled"],x=["disabled"],B={class:"loading-view"},D={class:"loading-view-wrap"},U={class:"loader-wrap"},F=Object(i["createElementVNode"])("h1",null,"Uploading Artwork",-1),I=Object(i["createElementVNode"])("p",null,"Larger file sizes can take up to 5 minutes.",-1),L={class:"progress-elements"},M={class:"loading_percent"},P={class:"material-icons"},R=["width","height"],X=["stroke-width","stroke-dasharray","cx","cy","r"],z=["stroke-width","stroke-dasharray","stroke-dashoffset","cx","cy","r"];function K(e,t,o,n,K,q){var H=Object(i["resolveComponent"])("MiniLoader");return Object(i["openBlock"])(),Object(i["createElementBlock"])("div",c,[Object(i["createElementVNode"])("div",l,[Object(i["createElementVNode"])("div",{class:Object(i["normalizeClass"])(["modal-body",{loading:q.isSaving||q.isSuccess}])},[Object(i["createElementVNode"])("div",r,[s,a,Object(i["withDirectives"])(Object(i["createElementVNode"])("input",{class:"form-control",type:"text",id:"art_title",placeholder:"Title...","onUpdate:modelValue":t[0]||(t[0]=function(e){return K.submission.artwork_title=e})},null,512),[[i["vModelText"],K.submission.artwork_title]])]),Object(i["createElementVNode"])("div",u,[d,m,Object(i["withDirectives"])(Object(i["createElementVNode"])("input",{class:"form-control",type:"text",id:"art_date",placeholder:"Date...","onUpdate:modelValue":t[1]||(t[1]=function(e){return K.submission.artwork_creation_date=e})},null,512),[[i["vModelText"],K.submission.artwork_creation_date]])]),Object(i["createElementVNode"])("div",f,[b,_,Object(i["createElementVNode"])("div",p,[Object(i["withDirectives"])(Object(i["createElementVNode"])("input",{type:"text",class:"form-control",placeholder:"Search for an existing artist or add a new one",onKeydown:t[2]||(t[2]=function(e){return K.flags.autocomplete_selections.artist=!1}),onClick:t[3]||(t[3]=function(e){return K.flags.autocomplete_selections.artist=!1}),"onUpdate:modelValue":t[4]||(t[4]=function(e){return K.local_input.artist_name=e})},null,544),[[i["vModelText"],K.local_input.artist_name]]),K.new_artist.artist_name?(Object(i["openBlock"])(),Object(i["createElementBlock"])("span",h,"New Artist")):Object(i["createCommentVNode"])("",!0),K.autocompletes.artists?(Object(i["openBlock"])(),Object(i["createElementBlock"])("ul",w,[(Object(i["openBlock"])(!0),Object(i["createElementBlock"])(i["Fragment"],null,Object(i["renderList"])(K.autocompletes.artists,(function(e,t){return Object(i["openBlock"])(),Object(i["createElementBlock"])("li",{key:"found-artist-".concat(t),onClick:function(t){return q.autoCompleteSelectArtist("artist",e,"artist_name")}},Object(i["toDisplayString"])(e.artist_name),9,v)})),128))])):Object(i["createCommentVNode"])("",!0)])]),Object(i["createElementVNode"])("div",O,[j,k,Object(i["createElementVNode"])("div",g,[Object(i["withDirectives"])(Object(i["createElementVNode"])("input",{type:"text",class:"form-control",placeholder:"Search for an existing collection or add a new one",onKeydown:t[5]||(t[5]=function(){return q.handleCollectionInputKeyDown&&q.handleCollectionInputKeyDown.apply(q,arguments)}),onClick:t[6]||(t[6]=function(e){return K.flags.autocomplete_selections.collection=!1}),"onUpdate:modelValue":t[7]||(t[7]=function(e){return K.local_input.collection_title=e})},null,544),[[i["vModelText"],K.local_input.collection_title]]),K.new_collection.collection_title?(Object(i["openBlock"])(),Object(i["createElementBlock"])("span",S,"New Collection")):Object(i["createCommentVNode"])("",!0),K.autocompletes.collections?(Object(i["openBlock"])(),Object(i["createElementBlock"])("ul",C,[(Object(i["openBlock"])(!0),Object(i["createElementBlock"])(i["Fragment"],null,Object(i["renderList"])(K.autocompletes.collections,(function(e,t){return Object(i["openBlock"])(),Object(i["createElementBlock"])("li",{key:"found-collection-".concat(t),onClick:function(t){return q.autoCompleteSelectCollection(e,"collection_title")}},Object(i["toDisplayString"])(e.collection_title),9,N)})),128))])):Object(i["createCommentVNode"])("",!0)])]),Object(i["createElementVNode"])("div",E,[y,Object(i["withDirectives"])(Object(i["createElementVNode"])("input",{class:"form-control",type:"text",id:"catalog_id",placeholder:"Catalog ID...","onUpdate:modelValue":t[8]||(t[8]=function(e){return K.submission.accession_number=e})},null,512),[[i["vModelText"],K.submission.accession_number]])])],2),Object(i["createElementVNode"])("div",V,[Object(i["createElementVNode"])("div",T,[Object(i["createElementVNode"])("button",{class:"btn artmap-secondary","data-toggle":"modal","data-target":"#newArtmap",disabled:q.isSaving}," Cancel ",8,A),Object(i["createElementVNode"])("button",{class:"btn artmap-primary",onClick:t[9]||(t[9]=function(){return q.save&&q.save.apply(q,arguments)}),disabled:!K.validForm},[Object(i["withDirectives"])(Object(i["createElementVNode"])("span",null,"Create",512),[[i["vShow"],q.isInitial]]),Object(i["withDirectives"])(Object(i["createElementVNode"])("span",null,[Object(i["createVNode"])(H)],512),[[i["vShow"],q.isSaving||q.isSuccess]])],8,x)])])]),Object(i["withDirectives"])(Object(i["createElementVNode"])("div",B,[Object(i["createElementVNode"])("div",D,[Object(i["createElementVNode"])("div",U,[F,I,Object(i["createElementVNode"])("div",L,[Object(i["createElementVNode"])("span",M,[Object(i["withDirectives"])(Object(i["createElementVNode"])("i",P,"î—Š",512),[[i["vShow"],q.isSuccess]]),Object(i["withDirectives"])(Object(i["createElementVNode"])("span",null,Object(i["toDisplayString"])(K.loaded_percent)+"%",513),[[i["vShow"],!q.isSuccess]])]),(Object(i["openBlock"])(),Object(i["createElementBlock"])("svg",{width:2*K.circle_loader.radius+2*K.circle_loader.stroke_width,height:2*K.circle_loader.radius+2*K.circle_loader.stroke_width},[Object(i["createElementVNode"])("circle",{id:"loading-track","stroke-width":K.circle_loader.stroke_width,"stroke-dasharray":q.circumference,"stroke-dashoffset":0,cx:K.circle_loader.radius+K.circle_loader.stroke_width,cy:K.circle_loader.radius+K.circle_loader.stroke_width,r:K.circle_loader.radius,transform:"",class:"outer"},null,8,X),Object(i["createElementVNode"])("circle",{"stroke-width":K.circle_loader.stroke_width,"stroke-dasharray":q.circumference,"stroke-dashoffset":q.circularLoadedPercent,cx:K.circle_loader.radius+K.circle_loader.stroke_width,cy:K.circle_loader.radius+K.circle_loader.stroke_width,r:K.circle_loader.radius,transform:"",class:"outer"},null,8,z)],8,R))]),Object(i["createElementVNode"])("p",{class:Object(i["normalizeClass"])(["redirect-notice",{show_notice:q.isSuccess}])},"Redirecting...",2)])])],512),[[i["vShow"],q.isSaving||q.isSuccess]])])}o("ac1f"),o("5319"),o("4de4"),o("d3b7"),o("b64b"),o("a9e3");var q=o("9191"),H=o("a421"),G=o("486e"),J=o("2ef0"),Z=o.n(J),Q={data:function(){return{csrf:window.csrf,userId:window.user_id,options:{artists:null,collections:null},autocompletes:{artists:null,collections:null},flags:{autocomplete_selections:{artist:!1,collection:!1}},loaded_percent:0,create_step:1,circle_loader:{radius:50,dash_offset:0,stroke_width:2},form_data:new FormData,local_input:{artist_name:null,collection_title:null},new_artist:{artist_name:null},new_collection:{collection_title:null,artworks:[]},selected_collection:null,submission:{artwork_title:null,artwork_creation_date:null,artwork_slug:null,artist:null,curator:window.user_id,curator_id:window.user_id,image_ref:null,accession_number:null},currentStatus:0,s:{STATUS_INITIAL:0,STATUS_SAVING:1,STATUS_SUCCESS:2,STATUS_FAILED:3},valid:{artwork_title:!1,artwork_creation_date:!1,artist_name:!1,accession_number:!1},validForm:!1}},computed:{isInitial:function(){return this.currentStatus===this.s.STATUS_INITIAL},isSaving:function(){return this.currentStatus===this.s.STATUS_SAVING},isSuccess:function(){return this.currentStatus===this.s.STATUS_SUCCESS},isFailed:function(){return this.currentStatus===this.s.STATUS_FAILED},circumference:function(){return 2*Math.PI*this.circle_loader.radius},circularLoadedPercent:function(){var e=this.loaded_percent,t=Math.PI*(2*this.circle_loader.radius);e<0&&(e=0),e>100&&(e=100);var o=(100-e)/100*t;return o}},watch:{"submission.artwork_title":function(e){var t=e.replace(/[^A-Z0-9]+/gi,"-").toLowerCase().toLowerCase();this.submission.artwork_slug=t,Object(G["a"])("artwork_title",e,this),this.submissionCheck()},"submission.artwork_creation_date":function(e){Object(G["a"])("artwork_creation_date",e,this),this.submissionCheck()},"submission.accession_number":function(e){Object(G["a"])("accession_number",e,this),this.submissionCheck()},"local_input.artist_name":function(e){var t;this.flags.autocomplete_selections.artist?(this.autocompletes.artists=null,this.new_artist.artist_name=null):e?(t=Z.a.filter(this.options.artists,(function(t){return t.artist_name.toLowerCase().indexOf(e.toLowerCase())>-1})),t.length>0?this.autocompletes.artists=t:(this.autocompletes.artists=null,this.new_artist.artist_name=e)):(this.autocompletes.artists=null,this.new_artist.artist_name=null),Object(G["a"])("artist_name",e,this),this.submissionCheck()},"local_input.collection_title":function(e){var t;this.flags.autocomplete_selections.collection?(this.autocompletes.collections=null,this.new_collection.collection_title=null):e?(t=Z.a.filter(this.options.collections,(function(t){return t.collection_title.toLowerCase().indexOf(e.toLowerCase())>-1})),t.length>0?this.autocompletes.collections=t:(this.autocompletes.collections=null,this.new_collection.collection_title=e)):(this.autocompletes.collections=null,this.new_collection.collection_title=null)}},methods:{submissionCheck:function(){var e=0,t=Object.keys(this.valid).length;for(var o in this.valid)this.valid[o]&&e++;this.validForm=e===t},handleCollectionInputKeyDown:function(){this.flags.autocomplete_selections.collection=!1,this.selected_collection=null},autoCompleteSelectArtist:function(e,t,o){this.flags.autocomplete_selections.artist=!0,this.submission[e]=t.id,this.local_input[o]=t[o]},autoCompleteSelectCollection:function(e,t){this.flags.autocomplete_selections.collection=!0,this.selected_collection=e.id,this.local_input[t]=e[t]},saveNewArtistFirst:function(e){q["b"].post("artists/",this.new_artist,{headers:{"X-CSRFToken":window.csrf}}).then((function(t){e(t)}),(function(e){console.log(e)}))},saveNewCollectionFirst:function(e){this.new_collection["curator"]=Number(window.user_id),this.new_collection["curator_id"]=Number(window.user_id),this.new_collection["collection_slug"]=this.new_collection.collection_title.replace(/[^A-Z0-9]+/gi,"-").toLowerCase().toLowerCase(),q["b"].post("artcollections/",this.new_collection,{headers:{"X-CSRFToken":window.csrf}}).then((function(t){e(t)}),(function(e){console.log(e)}))},save:function(){this.currentStatus=this.s.STATUS_SAVING;var e=this;this.new_artist.artist_name||this.new_collection.collection_title?this.new_artist.artist_name&&this.new_collection.collection_title?this.saveNewArtistFirst((function(t){e.submission.artist=t.data.id,e.saveNewCollectionFirst((function(t){e.saveSubmission(!0,t.data.id)}))})):this.new_artist.artist_name?this.saveNewArtistFirst((function(t){e.submission.artist=t.data.id,e.saveSubmission()})):this.new_collection.collection_title&&this.saveNewCollectionFirst((function(t){e.saveSubmission(!0,t.data.id)})):this.saveSubmission()},addArtToCollection:function(e,t,o){var n,i=this,c=this;q["b"].get("artcollections/".concat(e,"/"),{headers:{"X-CSRFToken":window.csrf}}).then((function(l){n=l.data,n.artworks.push(t),q["b"].put("artcollections/".concat(e,"/"),n,{headers:{"X-CSRFToken":window.csrf}}).then((function(e){c.currentStatus=i.s.STATUS_SUCCESS,setTimeout((function(){window.location="/art/".concat(o,"/")}),500)}),(function(e){console.log(e)}))}),(function(e){console.log(e)}))},saveSubmission:function(e,t){var o=this,n=this;console.log(window.csrf),q["b"].post("art/",this.submission,{headers:{"X-CSRFToken":window.csrf}}).then((function(i){e?o.addArtToCollection(t,i.data.id,i.data.artwork_slug):o.selected_collection?o.addArtToCollection(n.selected_collection,i.data.id,i.data.artwork_slug):(o.currentStatus=n.s.STATUS_SUCCESS,setTimeout((function(){window.location="/art/".concat(i.data.artwork_slug,"/")}),500))}),(function(e){console.log(e)}))},getArtists:function(){var e=this;q["b"].get("artists/").then((function(t){e.options.artists=t.data}),(function(e){console.log(e)}))},getCollections:function(){var e=this;q["b"].get("artcollections/").then((function(t){e.options.collections=t.data}),(function(e){console.log(e)}))},saveNewArtmap:function(){q["b"].post("art",this.submission,{headers:{"X-CSRFToken":window.csrf}}).then((function(e){window.location="/art/".concat(e.data.artwork_slug,"/")}),(function(e){console.log(e)}))}},mounted:function(){var e=this;this.getArtists(),this.getCollections(),setTimeout((function(){e.submission.curator=window.user_id,e.submission.curator_id=window.user_id}),0)},components:{MiniLoader:H["a"]}},W=(o("258e"),o("6b0d")),Y=o.n(W);const $=Y()(Q,[["render",K]]);var ee=$;Object(n["a"])(ee,null,null,"#createnew")},e8d1:function(e,t,o){"use strict";o.d(t,"a",(function(){return r}));var n=o("5530"),i=o("7a23"),c=o("1344"),l=o("6676"),r=function(e,t,o,r){var s=Object(c["a"])(),a=document.querySelector(r),u=Object(i["createApp"])(e,Object(n["a"])({},a.dataset));return u.config.globalProperties.emitter=s,t&&u.use(t),o&&u.use(o),u.use(l["a"],{autoSetContainer:!0,appendToBody:!0}),u.mount(r),u}}});